From 7957cdfbc4d8f0b1c5e44af3b5e038e8cc3ade90 Mon Sep 17 00:00:00 2001
From: Qin Liu <lqgy2001@gmail.com>
Date: Thu, 2 Feb 2023 20:03:48 +0800
Subject: [PATCH 19/85] enable LWD by default

---
 programs/server/users.xml | 1 +
 src/Core/Settings.h       | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/programs/server/users.xml b/programs/server/users.xml
index fd5fe41457..98e86f9857 100644
--- a/programs/server/users.xml
+++ b/programs/server/users.xml
@@ -18,6 +18,7 @@
                  first_or_random - if first replica one has higher number of errors, pick a random one from replicas with minimum number of errors.
             -->
             <load_balancing>random</load_balancing>
+            <allow_experimental_lightweight_delete>true</allow_experimental_lightweight_delete>
         </default>
 
         <!-- Profile that allows only read queries. -->
diff --git a/src/Core/Settings.h b/src/Core/Settings.h
index c31878b241..fe916416b8 100644
--- a/src/Core/Settings.h
+++ b/src/Core/Settings.h
@@ -957,7 +957,7 @@ class IColumn;
       "Wait for synchronous execution of ALTER TABLE UPDATE/DELETE queries (mutations). 0 - execute asynchronously. 1 - wait current " \
       "server. 2 - wait all replicas if they exist.", \
       0) \
-    M(Bool, allow_experimental_lightweight_delete, false, "Enable lightweight DELETE mutations for mergetree tables. Work in progress", 0) \
+    M(Bool, allow_experimental_lightweight_delete, true, "Enable lightweight DELETE mutations for mergetree tables.", 0) \
     M(Bool, optimize_move_functions_out_of_any, false, "Move functions out of aggregate functions 'any', 'anyLast'.", 0) \
     M(Bool, optimize_normalize_count_variants, true, "Rewrite aggregate functions that semantically equals to count() as count().", 0) \
     M(Bool, optimize_injective_functions_inside_uniq, true, "Delete injective functions of one argument inside uniq*() functions.", 0) \
-- 
2.32.1 (Apple Git-133)

